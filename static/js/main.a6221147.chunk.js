(this.webpackJsonphill=this.webpackJsonphill||[]).push([[0],[,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(5),r=n.n(a),i=(n(10),n(11),n(2)),o=n(3),l=n(0),u=Object(s.createContext)(),d=Object(s.createContext)(),j=Object(s.createContext)(),m="https://api.tvmaze.com";function b(e,t){return e.length<=t?e:e.slice(0,t)+"..."}function h(){return Object(s.useContext)(u)}function f(e){var t={};return t.name=e.name,t.image=e.image&&e.image.medium||null,t.number=e.number,t.season=e.season,t.subheader="Season ".concat(e.season," | Episode ").concat(e.number," | ").concat(x(e.airdate)),t.summary=e.summary&&b(e.summary.replace(/(<([^>]+)>)/gi,""),270),t}function x(e){return new Date(e).toString().replace(/^[^ ]+ (\w+) (\d+) (\d+).*/,"$1. $2, $3")}function O(e){var t={};return function(e,t){if(!(t.length<1)){var n=t.reduce((function(e,t){if("undefined"===typeof e.seasonsToIndex[t.season]){var n=e.seasons.push({info:{airdate:x(t.airdate),number:t.season},episodes:[]})-1;e.seasonsToIndex[t.season]=n}return e.seasons[e.seasonsToIndex[t.season]].episodes.push(f(t)),e}),{seasonsToIndex:{},seasons:[]});e.seasons=n.seasons}}(t,e._embedded.episodes),t.name=e.name,t.image=e.image&&e.image.medium||null,t.subheader=e.genres.length>0&&e.genres.join(", ")+(e.premiered?" | ":"")||"",t.subheader+=e.premiered&&"Premiered on ".concat(x(e.premiered))||"",t.summary=e.summary&&b(e.summary.replace(/(<([^>]+)>)/gi,""),700),t}function p(){var e=new Request("".concat(m,"/updates/shows"),{method:"GET"});return new Promise((function(t,n){fetch(e).then((function(e){200===e.status?t(e.json()):n(e)})).catch((function(e){n(e)}))}))}function g(e){var t=new Request("".concat(m,"/singlesearch/shows?q=").concat(e,"&embed=episodes"),{method:"GET"});return new Promise((function(n,s){fetch(t).then((function(t){200===t.status?n(t.json()):s({message:'There is no show matching "'.concat(e,'"')})})).catch((function(e){s(e)}))}))}function v(e){var t=e.children,n=Object(s.useState)(),c=Object(i.a)(n,2),a=c[0],r=c[1],b=Object(s.useState)(),h=Object(i.a)(b,2),x=h[0],v=h[1],N=Object(s.useState)(new Set),w=Object(i.a)(N,2),S=w[0],y=w[1],T=Object(s.useState)(),C=Object(i.a)(T,2),E=C[0],P=C[1];return Object(s.useEffect)((function(){for(var e,t,n;p().then((function(e){P(Object.keys(e).length)})),t=1,n=E,e=Math.floor(Math.random()*(n-t))+t,S.has(e););v(e)}),[S,E]),Object(s.useEffect)((function(){x&&function(e){var t=new Request("".concat(m,"/shows/").concat(e,"?embed=episodes"),{method:"GET"});return new Promise((function(e,n){fetch(t).then((function(t){200===t.status?e(t.json()):n(t)})).catch((function(e){n(e)}))}))}(x).then((function(e){r(O(e))})).catch((function(e){console.error("Failed to get show. Show ID: ".concat(x,". Reason: ").concat(e)),y((function(e){var t=new Set(e);return t.add(x),t}))}))}),[x]),Object(l.jsx)(u.Provider,{value:a,children:Object(l.jsx)(d.Provider,{value:function(e){return g(e).then((function(e){r(O(e))}))},children:Object(l.jsx)(j.Provider,{value:function(e,t,n){var s=a.seasons[t].info.number;return new Promise((function(t,c){g(e).then((function(e){var a=e._embedded.episodes.find((function(e){return e.season===s&&e.number===n}));if(a){var i=f(a);r((function(e){var t=e.seasons.map((function(e,t){if(e.info.number===s){var c=e.episodes.map((function(e){return e.number===n?i:e}));return Object(o.a)(Object(o.a)({},e),{},{episodes:c})}return e}));return Object(o.a)(Object(o.a)({},e),{},{seasons:t})})),t()}else c({message:"There is no matching episode for the season, episode, and show provided."})})).catch((function(e){c(e)}))}))},children:t})})})}n(13);var N=function(e){return Object(l.jsx)("div",{className:"d-flex align-items-center container error-notice mt-4",children:Object(l.jsx)("p",{className:"text-danger m-0 p-2",children:e.msg})})};var w=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("svg",{version:"1.1",x:"0px",y:"0px",width:"60px",height:"60px",viewBox:"0 0 50 50",children:Object(l.jsx)("path",{fill:"#0d6efd",d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z",children:Object(l.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})})})})};var S=function(){var e=Object(s.useContext)(d),t=Object(s.useState)(""),n=Object(i.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(null),o=Object(i.a)(r,2),u=o[0],j=o[1],m=Object(s.useState)(!1),b=Object(i.a)(m,2),h=b[0],f=b[1];function x(t){if(t.preventDefault(),""===c)return j("Please enter a TV show name."),void a("");f(!0),e(c).then((function(){j(null),f(!1)})).catch((function(e){j('There is no show matching "'.concat(c,'"')),f(!1)})),a("")}return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(l.jsxs)("div",{className:"container container-fluid",children:[Object(l.jsx)("h2",{className:"text-light",children:"Episode Switcher"}),Object(l.jsxs)("form",{className:"d-flex",onSubmit:x,children:[Object(l.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter a TV show","aria-label":"Enter a TV show","aria-describedby":"search-button",value:c,onChange:function(e){a(e.target.value)}}),Object(l.jsx)("button",{className:"btn bg-secondary text-light",type:"button",id:"search-button",onClick:x,children:"Search"})]})]})}),u&&Object(l.jsx)(N,{msg:u}),h&&Object(l.jsx)(w,{})]})};n(14);var y=function(){var e=h();return e?Object(l.jsxs)("div",{className:"show-container d-flex",children:[e.image&&Object(l.jsx)("img",{className:"show-image",src:e.image,alt:"Show"})||Object(l.jsx)("div",{className:"show-image d-flex align-items-center justify-content-center bg-secondary",children:Object(l.jsx)("p",{className:"text-light ",children:"NA"})}),Object(l.jsxs)("div",{className:"show-content container",children:[Object(l.jsx)("h1",{className:"text-left",children:e.name}),Object(l.jsx)("p",{className:"text-left text-secondary",children:e.subheader}),Object(l.jsx)("p",{className:"text-left mt-4",children:e.summary})]})]}):null};n(15);var T=function(){var e,t=Object(s.useState)(),n=Object(i.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(0),o=Object(i.a)(r,2),u=o[0],d=o[1],m=Object(s.useState)(1),b=Object(i.a)(m,2),f=b[0],x=b[1],O=Object(s.useState)(""),p=Object(i.a)(O,2),g=p[0],v=p[1],S=Object(s.useState)(!1),y=Object(i.a)(S,2),T=y[0],C=y[1],E=h(),P=Object(s.useContext)(j);return Object(s.useEffect)((function(){a(null)}),[E]),Object(s.useEffect)((function(){E&&E.seasons&&!E.seasons[u]&&(d(0),x(1))}),[E,u]),E&&E.seasons?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("form",{children:Object(l.jsxs)("div",{className:"replace-container d-flex align-items-center pt-4",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{className:"mr-4",children:"Replace"}),Object(l.jsx)("select",{className:"show-select custom-select mr-4","aria-label":"Select Season",onChange:function(e){d(Number(e.target.value))},children:E.seasons.map((function(e,t){return Object(l.jsxs)("option",{value:t,children:["Season ",e.info.number]},t)}))}),Object(l.jsx)("select",{className:"show-select custom-select mr-4","aria-label":"Select Episode",onChange:function(e){x(Number(e.target.value))},children:null===(e=E.seasons[u])||void 0===e?void 0:e.episodes.map((function(e,t){return Object(l.jsxs)("option",{value:e.number,children:["Episode ",e.number]},t)}))})]}),Object(l.jsxs)("div",{className:"replace-content d-flex align-items-center mr-4",children:[Object(l.jsx)("span",{className:"text-center mr-4",children:"with"}),Object(l.jsx)("input",{className:"form-control me-2 mr-4","aria-label":"Show Replacement",value:g,onChange:function(e){v(e.target.value)}}),Object(l.jsx)("button",{className:"btn bg-dark text-light",type:"submit",onClick:function(e){e.preventDefault(),""!==g?(C(!0),P(g,u,f).then((function(){C(!1),a(null)})).catch((function(e){a(e.message),C(!1)}))):a("Please enter a TV show name.")},children:"Replace"})]})]})}),c&&Object(l.jsx)(N,{msg:c}),T&&Object(l.jsx)("div",{className:"d-flex",children:Object(l.jsx)(w,{})})]}):null};n(16);var C=function(e){return e.episode?Object(l.jsxs)("div",{className:"episode d-flex pb-5",children:[e.episode.image&&Object(l.jsx)("img",{className:"episode-image",src:e.episode.image,alt:"Episode"})||Object(l.jsx)("div",{className:"episode-image d-flex align-items-center justify-content-center bg-secondary text-light",children:Object(l.jsx)("p",{children:"NA"})}),Object(l.jsxs)("div",{className:"episode-content container",children:[Object(l.jsx)("h4",{className:"text-left",children:e.episode.name}),Object(l.jsx)("p",{className:"text-left text-secondary",children:e.episode.subheader}),Object(l.jsx)("p",{className:"text-left",children:e.episode.summary})]})]}):Object(l.jsx)(w,{})};function E(e){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("h3",{className:"text-left",children:["Season ",e.seasonData.number]}),Object(l.jsx)("p",{className:"text-left text-secondary",children:"".concat(e.episodes.length," episodes | Aired ").concat(e.seasonData.airdate)}),Object(l.jsx)("hr",{}),Object(l.jsx)("ol",{children:e.episodes.map((function(e,t){return Object(l.jsx)("li",{children:Object(l.jsx)(C,{episode:e})},t)}))})]})}var P=function(){var e=h();return e?e.seasons?Object(l.jsx)("ol",{className:"pt-4",children:e.seasons.map((function(e,t){return Object(l.jsx)("li",{children:Object(l.jsx)(E,{seasonData:e.info,episodes:e.episodes})},t)}))}):Object(l.jsxs)("div",{className:"d-flex flex-column text-dark align-items-start bg-warning mt-4",children:[Object(l.jsx)("p",{className:"p-2 m-0",children:"This show does not have any seasons/episodes."}),Object(l.jsx)("p",{className:"p-2 m-0",children:"Please try another show."})]}):Object(l.jsx)(w,{})};var k=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(v,{children:[Object(l.jsx)(S,{}),Object(l.jsxs)("div",{className:"container pt-4",children:[Object(l.jsx)(y,{}),Object(l.jsx)(T,{}),Object(l.jsx)(P,{})]})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};r.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(k,{})}),document.getElementById("root")),D()}],[[17,1,2]]]);
//# sourceMappingURL=main.a6221147.chunk.js.map